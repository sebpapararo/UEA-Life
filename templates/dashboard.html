<!-- dashboard.html -->
<!-- MAIN HOME SCREEN POST USER LOGIN/ACCOUNT CREATION -->
{% extends 'base.html' %}
{% block title %}{{ super() }} Your Dashboard{% endblock %}
{% set active_page = "dashboard" %}
{% block current_user %}{{ user }}{% endblock %}

{% block content %}

    <div class="container bg-white p-2">

        <div class="col-sm-12">

            <div class="jumbotron jumbotron-fluid" id="dash_jumbo">
                <div class="container text-white">
                    <h1 class="display-4">Welcome {{ user }}</h1>
                    <p class="lead">An Online Forum for UEA Student and Staff</p>
                </div>
            </div>


            <div class="container">
                {% for message in get_flashed_messages() %}
                    <div class="alert alert-warning">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>

            <a href="/newPost">
                <button class="btn btn-success border-dark mb-2">Create a New Post</button>
            </a>

            <h4>Discussion Topic</h4>
            {#            {{ testScript | safe }}#}
            <div class="card border-dark bg-light">

                <div class="card-header">
                    {# DYNAMIC TABS #}
                    <ul class="nav nav-tabs card-header-tabs" id="forumTabs" role="tablist">

                        {# ALL QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link active" id="all_Tab" data-toggle="tab" href="#all" role="tab"
                               aria-controls="all"
                               aria-selected="true">All</a>
                        </li>
                        {# GENERAL QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="general_Tab" data-toggle="tab" href="#general" role="tab"
                               aria-controls="general"
                               aria-selected="false">General</a>
                        </li>
                        {# STUDENT UNION QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="sUnion_Tab" data-toggle="tab" href="#sUnion" role="tab"
                               aria-controls="sUnion" aria-selected="false">Student
                                Union</a>
                        </li>
                        {# ACCOMMODATION QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="accom_Tab" data-toggle="tab" href="#accommodation" role="tab"
                               aria-controls="accommodation"
                               aria-selected="false">Accommodation</a>
                        </li>
                        {# FINANCE QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="finance_Tab" data-toggle="tab" href="#finance" role="tab"
                               aria-controls="finance" aria-selected="false">Finance</a>
                        </li>
                        {# LOCAL AREA QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="localArea_Tab" data-toggle="tab" href="#localArea" role="tab"
                               aria-controls="localArea"
                               aria-selected="false">Local Area</a>
                        </li>
                        {# TRAVEL QUERIES TAB #}
                        <li class="nav-item">
                            <a class="nav-link" id="travel_Tab" data-toggle="tab" href="#travel" role="tab"
                               aria-controls="travel"
                               aria-selected="false">Travel</a>
                        </li>
                    </ul>
                    <!-- /card-header -->
                </div>


                <div class="card-body">
                    {# OUTPUTTED FEEDS #}
                    <div class="tab-content" id="forumContent">

                        {# ALL QUERIES - OUTPUT #}
                        <div class="tab-pane fade show active" id="all" role="tabpanel" aria-labelledby="all_Tab">

                            <hr>
                            <h4>All Posts</h4>
                            <hr>
                            {% for post in data[::-1] %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left">
                                                        <small>
                                                            <i>Posted to:</i> <b>{{ post.category | safe }}</b>
                                                        </small>
                                                    </div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                                <div class="col-4 text-left">
                                                                                    <small>
                                                                                        <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                    </small>
                                                                                </div>
                                                                                <div class="col-4 text-right">
                                                                                    <small>
                                                                                        <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                    </small>
                                                                                </div>
                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        {# GENERAL QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="general" role="tabpanel" aria-labelledby="general_Tab">
                            <h4>General Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'General' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                            <!-- /tab-pane fade -->
                        </div>

                        {# STUDENT UNION QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="sUnion" role="tabpanel" aria-labelledby="sUnion_Tab">
                            <h4>Student Union Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'Student Union' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        {# ACCOMMODATION QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="accommodation" role="tabpanel" aria-labelledby="accom_Tab">
                            <h4>Accommodation Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'Accommodation' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        {# FINANCE QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="finance" role="tabpanel" aria-labelledby="finance_Tab">
                            <h4>Finance Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'Finance' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        {# LOCAL AREA QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="localArea" role="tabpanel" aria-labelledby="localArea_Tab">
                            <h4>Local Area Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'Local Area' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                   placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                        {# TRAVEL QUERIES - OUTPUT #}
                        <div class="tab-pane fade" id="travel" role="tabpanel" aria-labelledby="travel_Tab">
                            <h4>Travel Feed</h4>
                            <hr>
                            {% for post in data[::-1] if post.category == 'Travel' %}
                                <div class="row">
                                    <div class="col-12">
                                        <div class="card shadow bg-light border-dark mb-3">
                                            <div class="card-header">
                                                <div class="row justify-content-between">

                                                    <div class="col-3 text-left">
                                                        <i>Posted by:</i> <b>{{ post.username | safe }}</b>
                                                    </div>

                                                    <div class="col-3 text-right">
                                                        <div class="dropdown">
                                                            <button class="btn btn-outline-secondary btn-sm dropdown-toggle" type="button"
                                                                    id="dropdownMenuButton" data-toggle="dropdown"
                                                                    aria-haspopup="true" aria-expanded="false">
                                                                Actions
                                                            </button>
                                                            <div class ="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                                <a class="dropdown-item" href="#">Edit Post</a>
                                                                <a class="dropdown-item" href="#">Delete Post</a>
                                                            </div>
                                                        </div>
                                                    </div>

                                                </div>
                                            </div>
                                            <div class="card-body text-dark">
                                                <h5 class="card-title"><b>{{ post.title | safe }}</b></h5>
                                                <p class="card-text">{{ post.content | safe }}</p>

                                                <hr>

                                                <div class="row justify-content-between">
                                                    <div class="col-3 text-left"></div>
                                                    <div class="col-3 text-right">
                                                        <small>
                                                            <i>Posted on:</i> <b>{{ post.posted_on | safe }}</b>
                                                        </small>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="card-footer text-muted">
                                                <form method="POST" action="/createReply">
                                                    <div class="form-row">
                                                        <div class="input-group">
                                                            <input type="text" class="form-control no-border" id="replyBody"
                                                                   name="replyBody" aria-label="Reply"
                                                                   aria-describedby="basic-addon1"
                                                                           placeholder="Reply to this post">
                                                            <div class="input-group-append">
                                                                <input type="hidden" id="postId" name="postId"
                                                                       value="{{ post.id | safe }}">
                                                                <button type="submit" class="btn btn-success"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Submit Your Response">
                                                                    Submit
                                                                </button>
                                                                <button class="btn btn-secondary" type="button"
                                                                        data-toggle="tooltip" data-placement="top"
                                                                        title="Watch this Post">
                                                                    <i class="fa fa-lg fa-eye"></i>
                                                                </button>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                            <a class="btn btn-secondary" data-toggle="collapse"
                                               href="#replyCollapse{{ post.id | safe }}" role="button"
                                               aria-expanded="false" aria-controls="multiCollapse">Show/Hide
                                                Comments</a>
                                            <div class="collapse multi-collapse"
                                                 id="replyCollapse{{ post.id | safe }}">

                                                <div class="container p-3 mb-2">
                                                    <b>Replies:</b>
                                                    <hr>

                                                    {% for reply in replies[::-1] if reply.posted_to == post.id %}
                                                        <div class="row">
                                                            <div class="col-12">
                                                                <div class="card shadow bg-light border-dark mb-3">

                                                                    <div class="card-body">
                                                                        <p class="card-text">
                                                                            {{ reply.content | safe }}
                                                                        </p>
                                                                    </div>

                                                                    <div class="card-footer">
                                                                        <div class="row justify-content-between">
                                                                            <div class="col-4 text-left">
                                                                                <small>
                                                                                    <i>Reply from:</i> <b>{{ reply.posted_by | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                            <div class="col-4 text-right">
                                                                                <small>
                                                                                    <i>Replied on:</i> <b>{{ reply.posted_on | safe }}</b>
                                                                                </small>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    {% endfor %}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}

{% block footer %}
    <footer id="fixed-footer" class="py-4 bg-dark text-white-50">
        <div class="container text-center">
          <small>Copyright &copy; UEA Life</small>
        </div>
    </footer>
{% endblock %}


